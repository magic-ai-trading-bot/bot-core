# ============================================
# BOT CORE - PRODUCTION ENVIRONMENT
# Viettel VPS T2.GEN 03 Configuration
# ============================================

# ============================================
# CRITICAL SAFETY SETTINGS
# ============================================
TRADING_ENABLED=false              # ⚠️ MUST BE FALSE INITIALLY
BINANCE_TESTNET=true               # ⚠️ MUST BE TRUE FOR TESTING

# ============================================
# ENVIRONMENT
# ============================================
NODE_ENV=production
RUST_ENV=production
PYTHON_ENV=production

# ============================================
# BINANCE API CONFIGURATION
# ============================================
# Testnet API Keys (for initial testing)
BINANCE_API_KEY=your_binance_testnet_api_key_here
BINANCE_SECRET_KEY=your_binance_testnet_secret_key_here

# Testnet URLs
BINANCE_API_URL=https://testnet.binance.vision
BINANCE_WS_URL=wss://testnet.binance.vision/ws

# Production URLs (ONLY use when ready)
# BINANCE_API_URL=https://api.binance.com
# BINANCE_WS_URL=wss://stream.binance.com:9443/ws

# ============================================
# AI/ML CONFIGURATION
# ============================================
OPENAI_API_KEY=sk-your_openai_api_key_here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=1000
OPENAI_TEMPERATURE=0.7

# ============================================
# DATABASE CONFIGURATION
# ============================================
# Local MongoDB on VPS
MONGODB_URI=mongodb://botcore_user:CHANGE_THIS_PASSWORD@localhost:27017/botcore_production
MONGODB_DATABASE=botcore_production
MONGODB_MAX_POOL_SIZE=10
MONGODB_MIN_POOL_SIZE=2

# MongoDB Atlas (alternative - if using cloud)
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/botcore_production?retryWrites=true&w=majority

# ============================================
# REDIS CONFIGURATION (Optional)
# ============================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# ============================================
# AUTHENTICATION & SECURITY
# ============================================
# IMPORTANT: Generate strong secrets using:
# openssl rand -base64 64
JWT_SECRET=GENERATE_WITH_openssl_rand_-base64_64
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=7d

# Session secret
# Generate with: openssl rand -base64 32
SESSION_SECRET=GENERATE_WITH_openssl_rand_-base64_32
SESSION_MAX_AGE=86400000

# Password hashing
BCRYPT_ROUNDS=12

# ============================================
# SERVER PORTS
# ============================================
RUST_PORT=8080
PYTHON_PORT=8000
FRONTEND_PORT=3000

# ============================================
# CORS & ALLOWED HOSTS
# ============================================
# Update with your actual VPS IP or domain
CORS_ORIGINS=http://localhost:3000,http://YOUR_VPS_IP:3000
ALLOWED_HOSTS=localhost,YOUR_VPS_IP,your-domain.com

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log
LOG_MAX_SIZE=10M
LOG_MAX_FILES=7
LOG_COMPRESS=true

# ============================================
# RESOURCE LIMITS (8GB VPS Optimized)
# ============================================

# Python AI Service
PYTHON_MEMORY_LIMIT=2G
PYTHON_MEMORY_RESERVE=1G
PYTHON_CPU_LIMIT=2
PYTHON_CPU_RESERVE=1

# Rust Core Engine
RUST_MEMORY_LIMIT=2G
RUST_MEMORY_RESERVE=1G
RUST_CPU_LIMIT=2
RUST_CPU_RESERVE=1

# Frontend Dashboard
FRONTEND_MEMORY_LIMIT=1G
FRONTEND_MEMORY_RESERVE=512M
FRONTEND_CPU_LIMIT=1
FRONTEND_CPU_RESERVE=0.5
NODE_MEMORY=1024

# MongoDB (external, adjust if needed)
MONGO_MEMORY_LIMIT=2G

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_SKIP_FAILED=false

# API rate limits
API_RATE_LIMIT_MAX=1000
API_RATE_LIMIT_WINDOW=900000

# ============================================
# MONITORING & METRICS
# ============================================
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_ENDPOINT=/metrics

# Health check
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# ============================================
# PAPER TRADING CONFIGURATION
# ============================================
PAPER_TRADING_ENABLED=true
PAPER_INITIAL_CAPITAL=10000
PAPER_BASE_CURRENCY=USDT

# Risk Management
DAILY_LOSS_LIMIT_PERCENT=5.0
CONSECUTIVE_LOSS_LIMIT=5
COOL_DOWN_DURATION_MINUTES=60
MAX_POSITION_CORRELATION=0.7

# Execution Simulation
SIMULATE_SLIPPAGE=true
SLIPPAGE_BPS_MIN=1
SLIPPAGE_BPS_MAX=10

SIMULATE_MARKET_IMPACT=true
MARKET_IMPACT_COEFFICIENT=0.1

SIMULATE_PARTIAL_FILLS=true
PARTIAL_FILL_PROBABILITY=0.3

SIMULATE_EXECUTION_LATENCY=true
LATENCY_MS_MIN=50
LATENCY_MS_MAX=200

# ============================================
# TRADING STRATEGIES
# ============================================
# RSI Strategy
RSI_ENABLED=true
RSI_PERIOD=14
RSI_OVERSOLD=30
RSI_OVERBOUGHT=70

# MACD Strategy
MACD_ENABLED=true
MACD_FAST_PERIOD=12
MACD_SLOW_PERIOD=26
MACD_SIGNAL_PERIOD=9

# Bollinger Bands Strategy
BB_ENABLED=true
BB_PERIOD=20
BB_STD_DEV=2

# Volume Strategy
VOLUME_ENABLED=true
VOLUME_PERIOD=20
VOLUME_MULTIPLIER=1.5

# ============================================
# POSITION SIZING & RISK
# ============================================
MAX_POSITION_SIZE_PERCENT=10
MAX_PORTFOLIO_RISK_PERCENT=2
DEFAULT_LEVERAGE=1
MAX_LEVERAGE=3

# Stop Loss & Take Profit
DEFAULT_STOP_LOSS_PERCENT=2
DEFAULT_TAKE_PROFIT_PERCENT=4
TRAILING_STOP_ENABLED=true
TRAILING_STOP_PERCENT=1.5

# ============================================
# MARKET DATA
# ============================================
MARKET_DATA_CACHE_TTL=60
MARKET_DATA_BATCH_SIZE=100
CANDLESTICK_INTERVALS=1m,5m,15m,1h,4h,1d

# ============================================
# NOTIFICATION (Optional)
# ============================================
# Email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
EMAIL_FROM=Bot Core <noreply@botcore.io>
EMAIL_TO=admin@example.com

# Telegram notifications (optional)
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# ============================================
# BACKUP CONFIGURATION
# ============================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=7
BACKUP_DIR=/var/backups/bot-core

# ============================================
# FEATURE FLAGS
# ============================================
FEATURE_AI_PREDICTION=true
FEATURE_SENTIMENT_ANALYSIS=true
FEATURE_MULTI_TIMEFRAME=true
FEATURE_PORTFOLIO_OPTIMIZATION=true

# ============================================
# DEVELOPMENT/DEBUG (Disable in production)
# ============================================
DEBUG=false
VERBOSE_LOGGING=false
ENABLE_PROFILING=false
ALLOW_CONSOLE_LOG=false

# ============================================
# EXTERNAL SERVICES (Optional)
# ============================================
# Sentry error tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# Analytics
ANALYTICS_ENABLED=false
ANALYTICS_ID=

# ============================================
# TIMEZONE & LOCALE
# ============================================
TZ=Asia/Ho_Chi_Minh
LOCALE=vi_VN

# ============================================
# NOTES
# ============================================
# 1. Generate JWT_SECRET: openssl rand -base64 64
# 2. Generate SESSION_SECRET: openssl rand -base64 32
# 3. Update YOUR_VPS_IP with actual IP address
# 4. Keep TRADING_ENABLED=false until fully tested
# 5. Keep BINANCE_TESTNET=true for initial deployment
# 6. Monitor logs regularly: docker compose logs -f
# 7. Backup database before any major changes
